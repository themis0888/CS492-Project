;; gorilla-repl.fileformat = 1

;; **
;;; # Gorilla REPL
;;; 
;;; Welcome to gorilla :-)
;;; 
;;; Shift + enter evaluates code. Hit ctrl+g twice in quick succession or click the menu icon (upper-right corner) for more commands ...
;;; 
;;; It's a good habit to run each worksheet in its own namespace: feel free to use the declaration we've provided below if you'd like.
;; **

;; @@
(ns ppp
  (:require [gorilla-plot.core :as plot]
            )
  (:use clojure.repl
        [anglican 
          core runtime emit ]
        ))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; 0 . Motivation -  TODO 
;;; ======
;;; Machine Learning, classification --> looking for MAP
;;; However, probability distribution not always differentiable. We make a suggestion how one can start solving this using known methods from variational optimization.
;; **

;; **
;;; 1. Problem Formulation
;;; ============
;;; Goal
;;; ----
;;; Given a function $$ f:[0,1] \to \mathbb{R} $$ we want to find the element @@ x \in \mathbb{R}@@ that maximizes @@f@@. 
;;; In other words, we want to solve the following problem:
;;; $$ \max_{x \in [0,1]}	f(x) $$
;;; 
;;; If we assume that @@ f @@ is differentiable, then one possible way to solve this is by using the known method called **Hill Climbing**.
;;; 
;;; Reminder: Hill-Climbing
;;; ---------
;;; Let @@\frac{df}{dx} @@ be the derivative of @@ f @@. Given a learning rate @@ \alpha @@ and initial value @@ x_0@@ we use the following update rule:
;;; $$ x_1 \leftarrow x_0 + \alpha \frac{df}{dx} $$
;;; $$ x_2 \leftarrow x_1 + \alpha \frac{df}{dx} $$
;;; $$	\vdots	$$
;;; 
;;; However, we want to examine the optimization problem with functions that are not necessarily differentiable. 
;;; We will use some techniques known from variational optimization to go around this problem of @@ f @@ being non-differentiable. With these techniques, we will solve the optimization problem wrt an alternative function @@ F @@. This function will be differentiable and we can apply hill-climbing or ADAM (or other gradient methods) onto the optimization problem regarding @@ F @@.
;;; 
;;; 
;; **

;; **
;;; 2. Method of resolution
;;; =======================
;;; Reformulation of the problem:
;;; -----------------------------
;;; Let's define $$ F(m):= \mathbb{E}_{x \sim q_m(x)}[f(x)] $$ with @@ q @@ being some suitable distribution.
;;; Since @@ F @@ is just like some average of @@ f @@ over @@ x@@, the following inequality holds:
;;; 
;;; $$ F \leq \max_{x \in [0,1]}	f(x)  $$
;;; 
;;; Intuitively speaking, the distribution @@ q @@ assigns different values of x different weights. Hence, by choosing a "good" distribution that gives a heavy weight to the argument @@ x @@ maximizing our target function, we can approximately solve this problem. Hence our new optimization problem is:
;;; 
;;; $$ \max_{m } F(m) $$
;;; 
;;; 
;; **

;; **
;;; Explanation with an example:
;;; ----------------------------
;;; Let us look at an example to enhance our understanding. Remember the Dirac-Distribution @@q_m := \delta_m @@. We know that
;;; 
;;; $$ \mathbb{E}_{x \sim \delta_m (x) }[f(x)]	= f(m) $$
;;; 
;;; Hence:
;;; 
;;; $$ \underset{y}{\operatorname{argmax}} \mathbb{E}_{x \sim \delta_y (x) }[f(x)] = \underset{y}{\operatorname{argmax}}  f(y)	$$
;;; 
;;; Since we want to choose @@ q @@ such that @@ F @@ is differentiable and such that the derivative is easily computable, we will choose the normal distribution @@ x \sim \mathcal{N}(\mu,\,\sigma^{2})@@. 
;;; To simplify this, we will fix @@ \sigma  @@ and optimize w.r.t. @@ \mu @@.
;; **

;; **
;;; Reminder: Normal Distribution
;;; --------
;;; Remember, the probability density function of the normal distribution is given by:
;;; 
;;; $$ p_{ m, \sigma } (x ) = \frac{1}{\sigma \sqrt {2\pi }} e^ { \frac{ -  (x - m ) ^2 }{ 2\sigma ^2 }} $$
;;; 
;;; Since the mean of the normal distribution gives us the peak of the pdf, we can deduce that finding @@ m @@ that maximizes @@ F @@ is approximately the argument @@ x @@ maximizing @@ f @@.
;; **

;; @@
;; TODO Plot.
;; Function: Gaussian Probability Density  Function ~> GPDF
(defn gpdf [m sigma x]
  (* (/ 1 (* (sqrt (* 2 Math/PI)) sigma ))
     (exp (/ (* -1 (pow (- x m) 2) )
             (* 2 (pow sigma 2))  ))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/gpdf</span>","value":"#'ppp/gpdf"}
;; <=

;; @@
(defn g [x] (gpdf 0 1 x))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/g</span>","value":"#'ppp/g"}
;; <=

;; @@
(def r [-1 2])
(plot/compose 
  (plot/plot (fn[x] (gpdf 0.5 0.2 x)) r :colour "purple" )
  (plot/plot (fn[x] (gpdf 0.5 0.5 x)) r :colour "green")
  (plot/plot (fn[x] (gpdf 0.5 1 x)) r :colour "blue")
  (plot/plot (fn[x] (gpdf 0.5 10 x)) r  :colour "red")
  (plot/plot (fn[x] (gpdf 0.5 100 x)) r :colour "pink")

  )

;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"c67bcc9a-f528-48d0-af3f-eefa7ab4bf5b","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"c67bcc9a-f528-48d0-af3f-eefa7ab4bf5b","field":"data.y"}}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}],"data":[{"name":"c67bcc9a-f528-48d0-af3f-eefa7ab4bf5b","values":[{"x":-1,"y":1.2171602665145135E-12},{"x":-0.9700000006705523,"y":3.707176258496997E-12},{"x":-0.9400000013411045,"y":1.1039949282679634E-11},{"x":-0.9100000020116568,"y":3.214543417430658E-11},{"x":-0.880000002682209,"y":9.151660238217947E-11},{"x":-0.8500000033527613,"y":2.54746869116125E-10},{"x":-0.8200000040233135,"y":6.933399050283657E-10},{"x":-0.7900000046938658,"y":1.8450660287613911E-9},{"x":-0.760000005364418,"y":4.800715873935131E-9},{"x":-0.7300000060349703,"y":1.2213171867571598E-8},{"x":-0.7000000067055225,"y":3.037940813782164E-8},{"x":-0.6700000073760748,"y":7.388538199161379E-8},{"x":-0.640000008046627,"y":1.756977144484596E-7},{"x":-0.6100000087171793,"y":4.085094201080162E-7},{"x":-0.5800000093877316,"y":9.286806868860838E-7},{"x":-0.5500000100582838,"y":2.0642349492950806E-6},{"x":-0.5200000107288361,"y":4.486216353828565E-6},{"x":-0.4900000113993883,"y":9.533001826021544E-6},{"x":-0.46000001206994057,"y":1.9806489717643875E-5},{"x":-0.4300000127404928,"y":4.02359003639239E-5},{"x":-0.4000000134110451,"y":7.991868141918036E-5},{"x":-0.37000001408159733,"y":1.5520698775326359E-4},{"x":-0.3400000147521496,"y":2.947152474813331E-4},{"x":-0.31000001542270184,"y":5.471700463124552E-4},{"x":-0.2800000160932541,"y":9.932770452551452E-4},{"x":-0.25000001676380634,"y":0.0017629778576955216},{"x":-0.2200000174343586,"y":0.0030595086904384138},{"x":-0.19000001810491085,"y":0.005191404856980627},{"x":-0.1600000187754631,"y":0.008612842027051346},{"x":-0.13000001944601536,"y":0.01397128779534396},{"x":-0.10000002011656761,"y":0.02215923537317258},{"x":-0.07000002078711987,"y":0.03436382327393819},{"x":-0.04000002145767212,"y":0.052104658978507246},{"x":-0.010000022128224373,"y":0.07724671387798149},{"x":0.019999977201223373,"y":0.1119726208401444},{"x":0.04999997653067112,"y":0.1586982172772482},{"x":0.07999997586011887,"y":0.21991792415980563},{"x":0.10999997518956661,"y":0.2979734582637758},{"x":0.13999997451901436,"y":0.3947507009767249},{"x":0.1699999738484621,"y":0.5113245125015144},{"x":0.19999997317790985,"y":0.6475878480569925},{"x":0.2299999725073576,"y":0.8019164878936549},{"x":0.25999997183680534,"y":0.9709301108490791},{"x":0.2899999711662531,"y":1.1494105294266255},{"x":0.31999997049570084,"y":1.3304260728539483},{"x":0.3499999698251486,"y":1.5056869903969408},{"x":0.37999996915459633,"y":1.6661228602822746},{"x":0.4099999684840441,"y":1.8026346844817636},{"x":0.4399999678134918,"y":1.9069389852360328},{"x":0.46999996714293957,"y":1.9723966059340514},{"x":0.4999999664723873,"y":1.9947114020071353},{"x":0.5299999658018351,"y":1.972396705128676},{"x":0.5599999651312828,"y":1.9069391770413733},{"x":0.5899999644607306,"y":1.8026349564529467},{"x":0.6199999637901783,"y":1.6661231954490325},{"x":0.649999963119626,"y":1.5056873690126567},{"x":0.6799999624490738,"y":1.3304264743080905},{"x":0.7099999617785215,"y":1.1494109340650938},{"x":0.7399999611079693,"y":0.9709305014847733},{"x":0.769999960437417,"y":0.8019168508593921},{"x":0.7999999597668648,"y":0.6475881737381854},{"x":0.8299999590963125,"y":0.5113247953691749},{"x":0.8599999584257603,"y":0.3947509392076664},{"x":0.889999957755208,"y":0.2979736530754397},{"x":0.9199999570846558,"y":0.21991807899963936},{"x":0.9499999564141035,"y":0.15869833699466884},{"x":0.9799999557435513,"y":0.11197271094037056},{"x":1.009999955072999,"y":0.07724677992040475},{"x":1.0399999544024467,"y":0.052104706146037814},{"x":1.0699999537318945,"y":0.0343638561098564},{"x":1.0999999530613422,"y":0.02215925766157113},{"x":1.12999995239079,"y":0.013971302550705096},{"x":1.1599999517202377,"y":0.008612851556401449},{"x":1.1899999510496855,"y":0.005191410861895662},{"x":1.2199999503791332,"y":0.003059512383249364},{"x":1.249999949708581,"y":0.001762980074263321},{"x":1.2799999490380287,"y":9.932783440420798E-4},{"x":1.3099999483674765,"y":5.471707892978114E-4},{"x":1.3399999476969242,"y":2.947156624877605E-4},{"x":1.369999947026372,"y":1.5520721411523347E-4},{"x":1.3999999463558197,"y":7.991880199598548E-5},{"x":1.4299999456852674,"y":4.023596309310765E-5},{"x":1.4599999450147152,"y":1.980652159275595E-5},{"x":1.489999944344163,"y":9.53301764716457E-6},{"x":1.5199999436736107,"y":4.486224024853298E-6},{"x":1.5499999430030584,"y":2.0642385827638662E-6},{"x":1.5799999423325062,"y":9.286823682556707E-7},{"x":1.609999941661954,"y":4.085101802558877E-7},{"x":1.6399999409914017,"y":1.7569805022009274E-7},{"x":1.6699999403208494,"y":7.388552690798003E-8},{"x":1.6999999396502972,"y":3.037946925082359E-8},{"x":1.729999938979745,"y":1.2213197050524504E-8},{"x":1.7599999383091927,"y":4.800726014207792E-9},{"x":1.7899999376386404,"y":1.8450700187781314E-9},{"x":1.8199999369680882,"y":6.933414392681296E-10},{"x":1.849999936297536,"y":2.5474744563793406E-10},{"x":1.8799999356269836,"y":9.151681409741022E-11},{"x":1.9099999349564314,"y":3.214551015645117E-11},{"x":1.9399999342858791,"y":1.1039975933017553E-11},{"x":1.9699999336153269,"y":3.707185394026633E-12},{"x":1.9999999329447746,"y":1.2171633271541418E-12}]},{"name":"be12684c-be0f-4aec-b46c-76fc4f638513","values":[{"x":-1,"y":0.008863696823876015},{"x":-0.9700000006705523,"y":0.010592687688856683},{"x":-0.9400000013411045,"y":0.012613452695095931},{"x":-0.9100000020116568,"y":0.014965744881763603},{"x":-0.880000002682209,"y":0.017692908534516893},{"x":-0.8500000033527613,"y":0.020841869251505003},{"x":-0.8200000040233135,"y":0.024463052182884987},{"x":-0.7900000046938658,"y":0.028610217295349977},{"x":-0.760000005364418,"y":0.03334020077335421},{"x":-0.7300000060349703,"y":0.03871255231401871},{"x":-0.7000000067055225,"y":0.044789059148082344},{"x":-0.6700000073760748,"y":0.051633149160797476},{"x":-0.640000008046627,"y":0.059309167518473795},{"x":-0.6100000087171793,"y":0.0678815237375931},{"x":-0.5800000093877316,"y":0.07741370915539815},{"x":-0.5500000100582838,"y":0.08796718824469874},{"x":-0.5200000107288361,"y":0.09960017111027827},{"x":-0.4900000113993883,"y":0.11236627873534483},{"x":-0.46000001206994057,"y":0.12631311701596454},{"x":-0.4300000127404928,"y":0.14148078020853688},{"x":-0.4000000134110451,"y":0.1579003089783987},{"x":-0.37000001408159733,"y":0.17559213261710135},{"x":-0.3400000147521496,"y":0.19456452901891136},{"x":-0.31000001542270184,"y":0.21481213949290046},{"x":-0.2800000160932541,"y":0.23631457825358404},{"x":-0.25000001676380634,"y":0.2590351783045363},{"x":-0.2200000174343586,"y":0.28291991624399854},{"x":-0.19000001810491085,"y":0.30789655813981315},{"x":-0.1600000187754631,"y":0.33387406693421684},{"x":-0.13000001944601536,"y":0.3607423087763587},{"x":-0.10000002011656761,"y":0.38837209121591293},{"x":-0.07000002078711987,"y":0.4166155603488742},{"x":-0.04000002145767212,"y":0.44530697686417897},{"x":-0.010000022128224373,"y":0.4742638826297383},{"x":0.019999977201223373,"y":0.503288660165451},{"x":0.04999997653067112,"y":0.5321704773160775},{"x":0.07999997586011887,"y":0.5606875989405542},{"x":0.10999997518956661,"y":0.5886100367949237},{"x":0.13999997451901436,"y":0.6157024983479673},{"x":0.1699999738484621,"y":0.6417275853898883},{"x":0.19999997317790985,"y":0.6664491843329259},{"x":0.2299999725073576,"y":0.6896359824019567},{"x":0.25999997183680534,"y":0.7110650377871642},{"x":0.2899999711662531,"y":0.7305253275507292},{"x":0.31999997049570084,"y":0.7478211948602184},{"x":0.3499999698251486,"y":0.7627756171110621},{"x":0.37999996915459633,"y":0.7752332187720836},{"x":0.4099999684840441,"y":0.7850629573337328},{"x":0.4399999678134918,"y":0.7921604174680599},{"x":0.46999996714293957,"y":0.7964496572509328},{"x":0.4999999664723873,"y":0.7978845608028636},{"x":0.5299999658018351,"y":0.796449663659666},{"x":0.5599999651312828,"y":0.7921604302164985},{"x":0.5899999644607306,"y":0.785062976285059},{"x":0.6199999637901783,"y":0.7752332437241337},{"x":0.649999963119626,"y":0.7627756477999167},{"x":0.6799999624490738,"y":0.7478212309648479},{"x":0.7099999617785215,"y":0.7305253686985834},{"x":0.7399999611079693,"y":0.7110650835605661},{"x":0.769999960437417,"y":0.6896360323451494},{"x":0.7999999597668648,"y":0.6664492379596072},{"x":0.8299999590963125,"y":0.6417276421910575},{"x":0.8599999584257603,"y":0.6157025577999093},{"x":0.889999957755208,"y":0.5886100983671564},{"x":0.9199999570846558,"y":0.5606876621035725},{"x":0.9499999564141035,"y":0.5321705415487403},{"x":0.9799999557435513,"y":0.503288724961872},{"x":1.009999955072999,"y":0.47426394750555917},{"x":1.0399999544024467,"y":0.4453070413621272},{"x":1.0699999537318945,"y":0.41661562404352825},{"x":1.0999999530613422,"y":0.388372153717624},{"x":1.12999995239079,"y":0.3607423697342977},{"x":1.1599999517202377,"y":0.33387412603854283},{"x":1.1899999510496855,"y":0.3078966151229789},{"x":1.2199999503791332,"y":0.2829199708812278},{"x":1.249999949708581,"y":0.25903523041352716},{"x":1.2799999490380287,"y":0.2363146276935053},{"x":1.3099999483674765,"y":0.21481218616276015},{"x":1.3399999476969242,"y":0.19456457285538495},{"x":1.369999947026372,"y":0.17559217359191293},{"x":1.3999999463558197,"y":0.15790034709534934},{"x":1.4299999456852674,"y":0.14148081550027572},{"x":1.4599999450147152,"y":0.1263131495405934},{"x":1.489999944344163,"y":0.11236630857294287},{"x":1.5199999436736107,"y":0.09960019835942605},{"x":1.5499999430030584,"y":0.08796721301907214},{"x":1.5799999423325062,"y":0.07741373158049374},{"x":1.609999941661954,"y":0.06788154394763592},{"x":1.6399999409914017,"y":0.05930918565354871},{"x":1.6699999403208494,"y":0.051633165364234734},{"x":1.6999999396502972,"y":0.04478907356411853},{"x":1.729999938979745,"y":0.03871256508574482},{"x":1.7599999383091927,"y":0.03334021204095463},{"x":1.7899999376386404,"y":0.028610227194628635},{"x":1.8199999369680882,"y":0.024463060844068855},{"x":1.849999936297536,"y":0.02084187679830989},{"x":1.8799999356269836,"y":0.01769291508345683},{"x":1.9099999349564314,"y":0.014965750541681621},{"x":1.9399999342858791,"y":0.012613457566892744},{"x":1.9699999336153269,"y":0.010592691865392374},{"x":1.9999999329447746,"y":0.008863700390019782}]},{"name":"7b469224-159a-4ea3-aad6-de476b931284","values":[{"x":-1,"y":0.12951759566589174},{"x":-0.9700000006705523,"y":0.1354180614405881},{"x":-0.9400000013411045,"y":0.14145996495165264},{"x":-0.9100000020116568,"y":0.14763850364358855},{"x":-0.880000002682209,"y":0.15394828619280207},{"x":-0.8500000033527613,"y":0.16038332661598814},{"x":-0.8200000040233135,"y":0.16693704085514893},{"x":-0.7900000046938658,"y":0.17360224596385632},{"x":-0.760000005364418,"y":0.18037116200792155},{"x":-0.7300000060349703,"y":0.1872354167808785},{"x":-0.7000000067055225,"y":0.1941860534206702},{"x":-0.6700000073760748,"y":0.201213540998723},{"x":-0.640000008046627,"y":0.20830778813626874},{"x":-0.6100000087171793,"y":0.21545815968543167},{"x":-0.5800000093877316,"y":0.22265349649433297},{"x":-0.5500000100582838,"y":0.22988213825640222},{"x":-0.5200000107288361,"y":0.23713194942434676},{"x":-0.4900000113993883,"y":0.24439034814895805},{"x":-0.46000001206994057,"y":0.25164433818227816},{"x":-0.4300000127404928,"y":0.25888054366376173},{"x":-0.4000000134110451,"y":0.2660852466871217},{"x":-0.37000001408159733,"y":0.2732444275247015},{"x":-0.3400000147521496,"y":0.2803438073656545},{"x":-0.31000001542270184,"y":0.2873688934041044},{"x":-0.2800000160932541,"y":0.2943050260939911},{"x":-0.25000001676380634,"y":0.3011374283686472},{"x":-0.2200000174343586,"y":0.3078512566054767},{"x":-0.19000001810491085,"y":0.3144316530995948},{"x":-0.1600000187754631,"y":0.3208637997950906},{"x":-0.13000001944601536,"y":0.32713297300885175},{"x":-0.10000002011656761,"y":0.3332245988697985},{"x":-0.07000002078711987,"y":0.33912430918602404},{"x":-0.04000002145767212,"y":0.34481799744387787},{"x":-0.010000022128224373,"y":0.35029187463654377},{"x":0.019999977201223373,"y":0.3555325246152578},{"x":0.04999997653067112,"y":0.36052695865405127},{"x":0.07999997586011887,"y":0.36526266891884684},{"x":0.10999997518956661,"y":0.3697276805339217},{"x":0.13999997451901436,"y":0.3739106019431884},{"x":0.1699999738484621,"y":0.3778006732704418},{"x":0.19999997317790985,"y":0.38138781239163844},{"x":0.2299999725073576,"y":0.38466265844338654},{"x":0.25999997183680534,"y":0.38761661250504864},{"x":0.2899999711662531,"y":0.39024187520712567},{"x":0.31999997049570084,"y":0.3925314810357828},{"x":0.3499999698251486,"y":0.3944793291223855},{"x":0.37999996915459633,"y":0.3960802103275854},{"x":0.4099999684840441,"y":0.3973298304516875},{"x":0.4399999678134918,"y":0.39822482942655874},{"x":0.46999996714293957,"y":0.3987627963690343},{"x":0.4999999664723873,"y":0.3989422804014325},{"x":0.5299999658018351,"y":0.3987627971712081},{"x":0.5599999651312828,"y":0.398224831028742},{"x":0.5899999644607306,"y":0.39732983284956114},{"x":0.6199999637901783,"y":0.39608021351469513},{"x":0.649999963119626,"y":0.39447933309017047},{"x":0.6799999624490738,"y":0.3925314857736144},{"x":0.7099999617785215,"y":0.39024188070235455},{"x":0.7399999611079693,"y":0.3876166187430612},{"x":0.769999960437417,"y":0.38466266540766963},{"x":0.7999999597668648,"y":0.3813878200638521},{"x":0.8299999590963125,"y":0.3778006816304998},{"x":0.8599999584257603,"y":0.3739106109693458},{"x":0.889999957755208,"y":0.369727690202869},{"x":0.9199999570846558,"y":0.3652626792058104},{"x":0.9499999564141035,"y":0.3605269695328986},{"x":0.9799999557435513,"y":0.35553253605860824},{"x":1.009999955072999,"y":0.35029188661588295},{"x":1.0399999544024467,"y":0.344818009929676},{"x":1.0699999537318945,"y":0.3391243221478564},{"x":1.0999999530613422,"y":0.33322461227646877},{"x":1.12999995239079,"y":0.3271329868285161},{"x":1.1599999517202377,"y":0.3208638139953829},{"x":1.1899999510496855,"y":0.31443166764775177},{"x":1.2199999503791332,"y":0.30785127146846214},{"x":1.249999949708581,"y":0.30113744351327587},{"x":1.2799999490380287,"y":0.2943050414870493},{"x":1.3099999483674765,"y":0.28736890901246903},{"x":1.3399999476969242,"y":0.2803438231564091},{"x":1.369999947026372,"y":0.2732444434652477},{"x":1.3999999463558197,"y":0.2660852627452874},{"x":1.4299999456852674,"y":0.25888055980790453},{"x":1.4599999450147152,"y":0.2516443543813834},{"x":1.489999944344163,"y":0.24439036437273162},{"x":1.5199999436736107,"y":0.237131965643302},{"x":1.5499999430030584,"y":0.229882154441941},{"x":1.5799999423325062,"y":0.22265351261882},{"x":1.609999941661954,"y":0.21545817572226286},{"x":1.6399999409914017,"y":0.20830780405993227},{"x":1.6699999403208494,"y":0.2012135567848539},{"x":1.6999999396502972,"y":0.19418606904609795},{"x":1.729999938979745,"y":0.18723543222366787},{"x":1.7599999383091927,"y":0.1803711772474063},{"x":1.7899999376386404,"y":0.17360226098066628},{"x":1.8199999369680882,"y":0.16693705563123046},{"x":1.849999936297536,"y":0.1603833411346176},{"x":1.8799999356269836,"y":0.15394830043859348},{"x":1.9099999349564314,"y":0.1476385176024946},{"x":1.9399999342858791,"y":0.14145997861095996},{"x":1.9699999336153269,"y":0.13541807478890677},{"x":1.9999999329447746,"y":0.12951760869313944}]},{"name":"5dc303ab-a71d-4c60-a2de-c3cd540da1b9","values":[{"x":-1,"y":0.039447933090788895},{"x":-0.9700000006705523,"y":0.03946551105979378},{"x":-0.9400000013411045,"y":0.039482741515271494},{"x":-0.9100000020116568,"y":0.03949962399528476},{"x":-0.880000002682209,"y":0.03951615804709407},{"x":-0.8500000033527613,"y":0.039532343227177816},{"x":-0.8200000040233135,"y":0.0395481791012522},{"x":-0.7900000046938658,"y":0.03956366524429061},{"x":-0.760000005364418,"y":0.03957880124054269},{"x":-0.7300000060349703,"y":0.03959358668355283},{"x":-0.7000000067055225,"y":0.0396080211761785},{"x":-0.6700000073760748,"y":0.03962210433060791},{"x":-0.640000008046627,"y":0.039635835768377425},{"x":-0.6100000087171793,"y":0.03964921512038854},{"x":-0.5800000093877316,"y":0.03966224202692436},{"x":-0.5500000100582838,"y":0.03967491613766576},{"x":-0.5200000107288361,"y":0.03968723711170707},{"x":-0.4900000113993883,"y":0.03969920461757136},{"x":-0.46000001206994057,"y":0.0397108183332253},{"x":-0.4300000127404928,"y":0.039722077946093615},{"x":-0.4000000134110451,"y":0.03973298315307309},{"x":-0.37000001408159733,"y":0.03974353366054618},{"x":-0.3400000147521496,"y":0.03975372918439417},{"x":-0.31000001542270184,"y":0.03976356945000995},{"x":-0.2800000160932541,"y":0.03977305419231034},{"x":-0.25000001676380634,"y":0.03978218315574796},{"x":-0.2200000174343586,"y":0.03979095609432274},{"x":-0.19000001810491085,"y":0.039799372771592956},{"x":-0.1600000187754631,"y":0.03980743296068584},{"x":-0.13000001944601536,"y":0.03981513644430779},{"x":-0.10000002011656761,"y":0.03982248301475415},{"x":-0.07000002078711987,"y":0.039829472473918465},{"x":-0.04000002145767212,"y":0.039836104633301485},{"x":-0.010000022128224373,"y":0.03984237931401958},{"x":0.019999977201223373,"y":0.03984829634681279},{"x":0.04999997653067112,"y":0.039853855572052434},{"x":0.07999997586011887,"y":0.039859056839748296},{"x":0.10999997518956661,"y":0.039863900009555364},{"x":0.13999997451901436,"y":0.03986838495078014},{"x":0.1699999738484621,"y":0.03987251154238654},{"x":0.19999997317790985,"y":0.03987627967300128},{"x":0.2299999725073576,"y":0.039879689240918954},{"x":0.25999997183680534,"y":0.03988274015410658},{"x":0.2899999711662531,"y":0.03988543233020772},{"x":0.31999997049570084,"y":0.039887765696546215},{"x":0.3499999698251486,"y":0.039889740190129454},{"x":0.37999996915459633,"y":0.03989135575765118},{"x":0.4099999684840441,"y":0.03989261235549393},{"x":0.4399999678134918,"y":0.03989350994973096},{"x":0.46999996714293957,"y":0.03989404851612778},{"x":0.4999999664723873,"y":0.039894228040143274},{"x":0.5299999658018351,"y":0.03989404851693031},{"x":0.5599999651312828,"y":0.039893509951336},{"x":0.5899999644607306,"y":0.03989261235790144},{"x":0.6199999637901783,"y":0.03989135576086109},{"x":0.649999963119626,"y":0.039889740194141675},{"x":0.6799999624490738,"y":0.03988776570136064},{"x":0.7099999617785215,"y":0.03988543233582422},{"x":0.7399999611079693,"y":0.03988274016052501},{"x":0.769999960437417,"y":0.03987968924813914},{"x":0.7999999597668648,"y":0.039876279681023016},{"x":0.8299999590963125,"y":0.03987251155120961},{"x":0.8599999584257603,"y":0.039868384960404325},{"x":0.889999957755208,"y":0.039863900019980386},{"x":0.9199999570846558,"y":0.03985905685097388},{"x":0.9499999564141035,"y":0.03985385558407827},{"x":0.9799999557435513,"y":0.03984829635963857},{"x":1.009999955072999,"y":0.03984237932764494},{"x":1.0399999544024467,"y":0.03983610464772607},{"x":1.0699999537318945,"y":0.03982947248914188},{"x":1.0999999530613422,"y":0.03982248303077598},{"x":1.12999995239079,"y":0.039815136461127616},{"x":1.1599999517202377,"y":0.03980743297830319},{"x":1.1899999510496855,"y":0.039799372790007365},{"x":1.2199999503791332,"y":0.03979095611353372},{"x":1.249999949708581,"y":0.039782183175754986},{"x":1.2799999490380287,"y":0.03977305421311288},{"x":1.3099999483674765,"y":0.03976356947160743},{"x":1.3399999476969242,"y":0.039753729206786007},{"x":1.369999947026372,"y":0.03974353368373178},{"x":1.3999999463558197,"y":0.039732983177051824},{"x":1.4299999456852674,"y":0.03972207797086484},{"x":1.4599999450147152,"y":0.039710818358788355},{"x":1.489999944344163,"y":0.03969920464392554},{"x":1.5199999436736107,"y":0.03968723713885168},{"x":1.5499999430030584,"y":0.039674916165600066},{"x":1.5799999423325062,"y":0.03966224205564761},{"x":1.609999941661954,"y":0.03964921514989996},{"x":1.6399999409914017,"y":0.03963583579867623},{"x":1.6699999403208494,"y":0.03962210436169328},{"x":1.6999999396502972,"y":0.0396080212080496},{"x":1.729999938979745,"y":0.03959358671620881},{"x":1.7599999383091927,"y":0.03957880127398265},{"x":1.7899999376386404,"y":0.03956366527851368},{"x":1.8199999369680882,"y":0.03954817913625744},{"x":1.849999936297536,"y":0.03953234326296429},{"x":1.8799999356269836,"y":0.039516158083660824},{"x":1.9099999349564314,"y":0.03949962403263082},{"x":1.9399999342858791,"y":0.03948274155339584},{"x":1.9699999336153269,"y":0.0394655110986954},{"x":1.9999999329447746,"y":0.039447933130466746}]},{"name":"cf131eaf-b78f-44a8-a8b2-b0921199659f","values":[{"x":-1,"y":0.003988974019193495},{"x":-0.9700000006705523,"y":0.003988991790111942},{"x":-0.9400000013411045,"y":0.00398900920209873},{"x":-0.9100000020116568,"y":0.003989026255149158},{"x":-0.880000002682209,"y":0.003989042949258624},{"x":-0.8500000033527613,"y":0.003989059284422618},{"x":-0.8200000040233135,"y":0.003989075260636732},{"x":-0.7900000046938658,"y":0.003989090877896651},{"x":-0.760000005364418,"y":0.00398910613619816},{"x":-0.7300000060349703,"y":0.003989121035537138},{"x":-0.7000000067055225,"y":0.0039891355759095635},{"x":-0.6700000073760748,"y":0.003989149757311511},{"x":-0.640000008046627,"y":0.00398916357973915},{"x":-0.6100000087171793,"y":0.003989177043188751},{"x":-0.5800000093877316,"y":0.003989190147656677},{"x":-0.5500000100582838,"y":0.003989202893139391},{"x":-0.5200000107288361,"y":0.003989215279633452},{"x":-0.4900000113993883,"y":0.0039892273071355155},{"x":-0.46000001206994057,"y":0.003989238975642333},{"x":-0.4300000127404928,"y":0.003989250285150756},{"x":-0.4000000134110451,"y":0.00398926123565773},{"x":-0.37000001408159733,"y":0.0039892718271602986},{"x":-0.3400000147521496,"y":0.003989282059655603},{"x":-0.31000001542270184,"y":0.003989291933140879},{"x":-0.2800000160932541,"y":0.003989301447613461},{"x":-0.25000001676380634,"y":0.003989310603070781},{"x":-0.2200000174343586,"y":0.003989319399510367},{"x":-0.19000001810491085,"y":0.003989327836929844},{"x":-0.1600000187754631,"y":0.003989335915326933},{"x":-0.13000001944601536,"y":0.003989343634699454},{"x":-0.10000002011656761,"y":0.003989350995045322},{"x":-0.07000002078711987,"y":0.00398935799636255},{"x":-0.04000002145767212,"y":0.0039893646386492485},{"x":-0.010000022128224373,"y":0.003989370921903623},{"x":0.019999977201223373,"y":0.003989376846123977},{"x":0.04999997653067112,"y":0.003989382411308712},{"x":0.07999997586011887,"y":0.0039893876174563235},{"x":0.10999997518956661,"y":0.003989392464565408},{"x":0.13999997451901436,"y":0.003989396952634655},{"x":0.1699999738484621,"y":0.003989401081662855},{"x":0.19999997317790985,"y":0.003989404851648891},{"x":0.2299999725073576,"y":0.003989408262591747},{"x":0.25999997183680534,"y":0.0039894113144905},{"x":0.2899999711662531,"y":0.003989414007344327},{"x":0.31999997049570084,"y":0.0039894163411525},{"x":0.3499999698251486,"y":0.003989418315914391},{"x":0.37999996915459633,"y":0.0039894199316294655},{"x":0.4099999684840441,"y":0.0039894211882972866},{"x":0.4399999678134918,"y":0.0039894220859175164},{"x":0.46999996714293957,"y":0.0039894226244899115},{"x":0.4999999664723873,"y":0.003989422804014327},{"x":0.5299999658018351,"y":0.003989422624490714},{"x":0.5599999651312828,"y":0.003989422085919121},{"x":0.5899999644607306,"y":0.003989421188299694},{"x":0.6199999637901783,"y":0.003989419931632676},{"x":0.649999963119626,"y":0.003989418315918404},{"x":0.6799999624490738,"y":0.003989416341157316},{"x":0.7099999617785215,"y":0.003989414007349945},{"x":0.7399999611079693,"y":0.00398941131449692},{"x":0.769999960437417,"y":0.003989408262598969},{"x":0.7999999597668648,"y":0.003989404851656917},{"x":0.8299999590963125,"y":0.003989401081671683},{"x":0.8599999584257603,"y":0.0039893969526442865},{"x":0.889999957755208,"y":0.003989392464575841},{"x":0.9199999570846558,"y":0.003989387617467559},{"x":0.9499999564141035,"y":0.00398938241132075},{"x":0.9799999557435513,"y":0.003989376846136817},{"x":1.009999955072999,"y":0.0039893709219172655},{"x":1.0399999544024467,"y":0.0039893646386636936},{"x":1.0699999537318945,"y":0.003989357996377798},{"x":1.0999999530613422,"y":0.003989350995061373},{"x":1.12999995239079,"y":0.003989343634716307},{"x":1.1599999517202377,"y":0.003989335915344588},{"x":1.1899999510496855,"y":0.0039893278369483014},{"x":1.2199999503791332,"y":0.003989319399529627},{"x":1.249999949708581,"y":0.003989310603090844},{"x":1.2799999490380287,"y":0.003989301447634326},{"x":1.3099999483674765,"y":0.003989291933162546},{"x":1.3399999476969242,"y":0.003989282059678073},{"x":1.369999947026372,"y":0.003989271827183572},{"x":1.3999999463558197,"y":0.003989261235681806},{"x":1.4299999456852674,"y":0.003989250285175634},{"x":1.4599999450147152,"y":0.003989238975668013},{"x":1.489999944344163,"y":0.003989227307161998},{"x":1.5199999436736107,"y":0.003989215279660737},{"x":1.5499999430030584,"y":0.003989202893167479},{"x":1.5799999423325062,"y":0.003989190147685567},{"x":1.609999941661954,"y":0.003989177043218443},{"x":1.6399999409914017,"y":0.003989163579769644},{"x":1.6699999403208494,"y":0.003989149757342807},{"x":1.6999999396502972,"y":0.003989135575941663},{"x":1.729999938979745,"y":0.003989121035570039},{"x":1.7599999383091927,"y":0.0039891061362318635},{"x":1.7899999376386404,"y":0.003989090877931157},{"x":1.8199999369680882,"y":0.00398907526067204},{"x":1.849999936297536,"y":0.003989059284458729},{"x":1.8799999356269836,"y":0.003989042949295537},{"x":1.9099999349564314,"y":0.003989026255186874},{"x":1.9399999342858791,"y":0.003989009202137248},{"x":1.9699999336153269,"y":0.003988991790151262},{"x":1.9999999329447746,"y":0.003988974019233617}]}],"marks":[{"type":"line","from":{"data":"c67bcc9a-f528-48d0-af3f-eefa7ab4bf5b"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"purple"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"be12684c-be0f-4aec-b46c-76fc4f638513"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"green"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"7b469224-159a-4ea3-aad6-de476b931284"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"blue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"5dc303ab-a71d-4c60-a2de-c3cd540da1b9"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"red"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}},{"type":"line","from":{"data":"cf131eaf-b78f-44a8-a8b2-b0921199659f"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"pink"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"c67bcc9a-f528-48d0-af3f-eefa7ab4bf5b\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"c67bcc9a-f528-48d0-af3f-eefa7ab4bf5b\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}], :data ({:name \"c67bcc9a-f528-48d0-af3f-eefa7ab4bf5b\", :values ({:x -1, :y 1.2171602665145135E-12} {:x -0.9700000006705523, :y 3.707176258496997E-12} {:x -0.9400000013411045, :y 1.1039949282679634E-11} {:x -0.9100000020116568, :y 3.214543417430658E-11} {:x -0.880000002682209, :y 9.151660238217947E-11} {:x -0.8500000033527613, :y 2.54746869116125E-10} {:x -0.8200000040233135, :y 6.933399050283657E-10} {:x -0.7900000046938658, :y 1.8450660287613911E-9} {:x -0.760000005364418, :y 4.800715873935131E-9} {:x -0.7300000060349703, :y 1.2213171867571598E-8} {:x -0.7000000067055225, :y 3.037940813782164E-8} {:x -0.6700000073760748, :y 7.388538199161379E-8} {:x -0.640000008046627, :y 1.756977144484596E-7} {:x -0.6100000087171793, :y 4.085094201080162E-7} {:x -0.5800000093877316, :y 9.286806868860838E-7} {:x -0.5500000100582838, :y 2.0642349492950806E-6} {:x -0.5200000107288361, :y 4.486216353828565E-6} {:x -0.4900000113993883, :y 9.533001826021544E-6} {:x -0.46000001206994057, :y 1.9806489717643875E-5} {:x -0.4300000127404928, :y 4.02359003639239E-5} {:x -0.4000000134110451, :y 7.991868141918036E-5} {:x -0.37000001408159733, :y 1.5520698775326359E-4} {:x -0.3400000147521496, :y 2.947152474813331E-4} {:x -0.31000001542270184, :y 5.471700463124552E-4} {:x -0.2800000160932541, :y 9.932770452551452E-4} {:x -0.25000001676380634, :y 0.0017629778576955216} {:x -0.2200000174343586, :y 0.0030595086904384138} {:x -0.19000001810491085, :y 0.005191404856980627} {:x -0.1600000187754631, :y 0.008612842027051346} {:x -0.13000001944601536, :y 0.01397128779534396} {:x -0.10000002011656761, :y 0.02215923537317258} {:x -0.07000002078711987, :y 0.03436382327393819} {:x -0.04000002145767212, :y 0.052104658978507246} {:x -0.010000022128224373, :y 0.07724671387798149} {:x 0.019999977201223373, :y 0.1119726208401444} {:x 0.04999997653067112, :y 0.1586982172772482} {:x 0.07999997586011887, :y 0.21991792415980563} {:x 0.10999997518956661, :y 0.2979734582637758} {:x 0.13999997451901436, :y 0.3947507009767249} {:x 0.1699999738484621, :y 0.5113245125015144} {:x 0.19999997317790985, :y 0.6475878480569925} {:x 0.2299999725073576, :y 0.8019164878936549} {:x 0.25999997183680534, :y 0.9709301108490791} {:x 0.2899999711662531, :y 1.1494105294266255} {:x 0.31999997049570084, :y 1.3304260728539483} {:x 0.3499999698251486, :y 1.5056869903969408} {:x 0.37999996915459633, :y 1.6661228602822746} {:x 0.4099999684840441, :y 1.8026346844817636} {:x 0.4399999678134918, :y 1.9069389852360328} {:x 0.46999996714293957, :y 1.9723966059340514} {:x 0.4999999664723873, :y 1.9947114020071353} {:x 0.5299999658018351, :y 1.972396705128676} {:x 0.5599999651312828, :y 1.9069391770413733} {:x 0.5899999644607306, :y 1.8026349564529467} {:x 0.6199999637901783, :y 1.6661231954490325} {:x 0.649999963119626, :y 1.5056873690126567} {:x 0.6799999624490738, :y 1.3304264743080905} {:x 0.7099999617785215, :y 1.1494109340650938} {:x 0.7399999611079693, :y 0.9709305014847733} {:x 0.769999960437417, :y 0.8019168508593921} {:x 0.7999999597668648, :y 0.6475881737381854} {:x 0.8299999590963125, :y 0.5113247953691749} {:x 0.8599999584257603, :y 0.3947509392076664} {:x 0.889999957755208, :y 0.2979736530754397} {:x 0.9199999570846558, :y 0.21991807899963936} {:x 0.9499999564141035, :y 0.15869833699466884} {:x 0.9799999557435513, :y 0.11197271094037056} {:x 1.009999955072999, :y 0.07724677992040475} {:x 1.0399999544024467, :y 0.052104706146037814} {:x 1.0699999537318945, :y 0.0343638561098564} {:x 1.0999999530613422, :y 0.02215925766157113} {:x 1.12999995239079, :y 0.013971302550705096} {:x 1.1599999517202377, :y 0.008612851556401449} {:x 1.1899999510496855, :y 0.005191410861895662} {:x 1.2199999503791332, :y 0.003059512383249364} {:x 1.249999949708581, :y 0.001762980074263321} {:x 1.2799999490380287, :y 9.932783440420798E-4} {:x 1.3099999483674765, :y 5.471707892978114E-4} {:x 1.3399999476969242, :y 2.947156624877605E-4} {:x 1.369999947026372, :y 1.5520721411523347E-4} {:x 1.3999999463558197, :y 7.991880199598548E-5} {:x 1.4299999456852674, :y 4.023596309310765E-5} {:x 1.4599999450147152, :y 1.980652159275595E-5} {:x 1.489999944344163, :y 9.53301764716457E-6} {:x 1.5199999436736107, :y 4.486224024853298E-6} {:x 1.5499999430030584, :y 2.0642385827638662E-6} {:x 1.5799999423325062, :y 9.286823682556707E-7} {:x 1.609999941661954, :y 4.085101802558877E-7} {:x 1.6399999409914017, :y 1.7569805022009274E-7} {:x 1.6699999403208494, :y 7.388552690798003E-8} {:x 1.6999999396502972, :y 3.037946925082359E-8} {:x 1.729999938979745, :y 1.2213197050524504E-8} {:x 1.7599999383091927, :y 4.800726014207792E-9} {:x 1.7899999376386404, :y 1.8450700187781314E-9} {:x 1.8199999369680882, :y 6.933414392681296E-10} {:x 1.849999936297536, :y 2.5474744563793406E-10} {:x 1.8799999356269836, :y 9.151681409741022E-11} {:x 1.9099999349564314, :y 3.214551015645117E-11} {:x 1.9399999342858791, :y 1.1039975933017553E-11} {:x 1.9699999336153269, :y 3.707185394026633E-12} {:x 1.9999999329447746, :y 1.2171633271541418E-12})} {:name \"be12684c-be0f-4aec-b46c-76fc4f638513\", :values ({:x -1, :y 0.008863696823876015} {:x -0.9700000006705523, :y 0.010592687688856683} {:x -0.9400000013411045, :y 0.012613452695095931} {:x -0.9100000020116568, :y 0.014965744881763603} {:x -0.880000002682209, :y 0.017692908534516893} {:x -0.8500000033527613, :y 0.020841869251505003} {:x -0.8200000040233135, :y 0.024463052182884987} {:x -0.7900000046938658, :y 0.028610217295349977} {:x -0.760000005364418, :y 0.03334020077335421} {:x -0.7300000060349703, :y 0.03871255231401871} {:x -0.7000000067055225, :y 0.044789059148082344} {:x -0.6700000073760748, :y 0.051633149160797476} {:x -0.640000008046627, :y 0.059309167518473795} {:x -0.6100000087171793, :y 0.0678815237375931} {:x -0.5800000093877316, :y 0.07741370915539815} {:x -0.5500000100582838, :y 0.08796718824469874} {:x -0.5200000107288361, :y 0.09960017111027827} {:x -0.4900000113993883, :y 0.11236627873534483} {:x -0.46000001206994057, :y 0.12631311701596454} {:x -0.4300000127404928, :y 0.14148078020853688} {:x -0.4000000134110451, :y 0.1579003089783987} {:x -0.37000001408159733, :y 0.17559213261710135} {:x -0.3400000147521496, :y 0.19456452901891136} {:x -0.31000001542270184, :y 0.21481213949290046} {:x -0.2800000160932541, :y 0.23631457825358404} {:x -0.25000001676380634, :y 0.2590351783045363} {:x -0.2200000174343586, :y 0.28291991624399854} {:x -0.19000001810491085, :y 0.30789655813981315} {:x -0.1600000187754631, :y 0.33387406693421684} {:x -0.13000001944601536, :y 0.3607423087763587} {:x -0.10000002011656761, :y 0.38837209121591293} {:x -0.07000002078711987, :y 0.4166155603488742} {:x -0.04000002145767212, :y 0.44530697686417897} {:x -0.010000022128224373, :y 0.4742638826297383} {:x 0.019999977201223373, :y 0.503288660165451} {:x 0.04999997653067112, :y 0.5321704773160775} {:x 0.07999997586011887, :y 0.5606875989405542} {:x 0.10999997518956661, :y 0.5886100367949237} {:x 0.13999997451901436, :y 0.6157024983479673} {:x 0.1699999738484621, :y 0.6417275853898883} {:x 0.19999997317790985, :y 0.6664491843329259} {:x 0.2299999725073576, :y 0.6896359824019567} {:x 0.25999997183680534, :y 0.7110650377871642} {:x 0.2899999711662531, :y 0.7305253275507292} {:x 0.31999997049570084, :y 0.7478211948602184} {:x 0.3499999698251486, :y 0.7627756171110621} {:x 0.37999996915459633, :y 0.7752332187720836} {:x 0.4099999684840441, :y 0.7850629573337328} {:x 0.4399999678134918, :y 0.7921604174680599} {:x 0.46999996714293957, :y 0.7964496572509328} {:x 0.4999999664723873, :y 0.7978845608028636} {:x 0.5299999658018351, :y 0.796449663659666} {:x 0.5599999651312828, :y 0.7921604302164985} {:x 0.5899999644607306, :y 0.785062976285059} {:x 0.6199999637901783, :y 0.7752332437241337} {:x 0.649999963119626, :y 0.7627756477999167} {:x 0.6799999624490738, :y 0.7478212309648479} {:x 0.7099999617785215, :y 0.7305253686985834} {:x 0.7399999611079693, :y 0.7110650835605661} {:x 0.769999960437417, :y 0.6896360323451494} {:x 0.7999999597668648, :y 0.6664492379596072} {:x 0.8299999590963125, :y 0.6417276421910575} {:x 0.8599999584257603, :y 0.6157025577999093} {:x 0.889999957755208, :y 0.5886100983671564} {:x 0.9199999570846558, :y 0.5606876621035725} {:x 0.9499999564141035, :y 0.5321705415487403} {:x 0.9799999557435513, :y 0.503288724961872} {:x 1.009999955072999, :y 0.47426394750555917} {:x 1.0399999544024467, :y 0.4453070413621272} {:x 1.0699999537318945, :y 0.41661562404352825} {:x 1.0999999530613422, :y 0.388372153717624} {:x 1.12999995239079, :y 0.3607423697342977} {:x 1.1599999517202377, :y 0.33387412603854283} {:x 1.1899999510496855, :y 0.3078966151229789} {:x 1.2199999503791332, :y 0.2829199708812278} {:x 1.249999949708581, :y 0.25903523041352716} {:x 1.2799999490380287, :y 0.2363146276935053} {:x 1.3099999483674765, :y 0.21481218616276015} {:x 1.3399999476969242, :y 0.19456457285538495} {:x 1.369999947026372, :y 0.17559217359191293} {:x 1.3999999463558197, :y 0.15790034709534934} {:x 1.4299999456852674, :y 0.14148081550027572} {:x 1.4599999450147152, :y 0.1263131495405934} {:x 1.489999944344163, :y 0.11236630857294287} {:x 1.5199999436736107, :y 0.09960019835942605} {:x 1.5499999430030584, :y 0.08796721301907214} {:x 1.5799999423325062, :y 0.07741373158049374} {:x 1.609999941661954, :y 0.06788154394763592} {:x 1.6399999409914017, :y 0.05930918565354871} {:x 1.6699999403208494, :y 0.051633165364234734} {:x 1.6999999396502972, :y 0.04478907356411853} {:x 1.729999938979745, :y 0.03871256508574482} {:x 1.7599999383091927, :y 0.03334021204095463} {:x 1.7899999376386404, :y 0.028610227194628635} {:x 1.8199999369680882, :y 0.024463060844068855} {:x 1.849999936297536, :y 0.02084187679830989} {:x 1.8799999356269836, :y 0.01769291508345683} {:x 1.9099999349564314, :y 0.014965750541681621} {:x 1.9399999342858791, :y 0.012613457566892744} {:x 1.9699999336153269, :y 0.010592691865392374} {:x 1.9999999329447746, :y 0.008863700390019782})} {:name \"7b469224-159a-4ea3-aad6-de476b931284\", :values ({:x -1, :y 0.12951759566589174} {:x -0.9700000006705523, :y 0.1354180614405881} {:x -0.9400000013411045, :y 0.14145996495165264} {:x -0.9100000020116568, :y 0.14763850364358855} {:x -0.880000002682209, :y 0.15394828619280207} {:x -0.8500000033527613, :y 0.16038332661598814} {:x -0.8200000040233135, :y 0.16693704085514893} {:x -0.7900000046938658, :y 0.17360224596385632} {:x -0.760000005364418, :y 0.18037116200792155} {:x -0.7300000060349703, :y 0.1872354167808785} {:x -0.7000000067055225, :y 0.1941860534206702} {:x -0.6700000073760748, :y 0.201213540998723} {:x -0.640000008046627, :y 0.20830778813626874} {:x -0.6100000087171793, :y 0.21545815968543167} {:x -0.5800000093877316, :y 0.22265349649433297} {:x -0.5500000100582838, :y 0.22988213825640222} {:x -0.5200000107288361, :y 0.23713194942434676} {:x -0.4900000113993883, :y 0.24439034814895805} {:x -0.46000001206994057, :y 0.25164433818227816} {:x -0.4300000127404928, :y 0.25888054366376173} {:x -0.4000000134110451, :y 0.2660852466871217} {:x -0.37000001408159733, :y 0.2732444275247015} {:x -0.3400000147521496, :y 0.2803438073656545} {:x -0.31000001542270184, :y 0.2873688934041044} {:x -0.2800000160932541, :y 0.2943050260939911} {:x -0.25000001676380634, :y 0.3011374283686472} {:x -0.2200000174343586, :y 0.3078512566054767} {:x -0.19000001810491085, :y 0.3144316530995948} {:x -0.1600000187754631, :y 0.3208637997950906} {:x -0.13000001944601536, :y 0.32713297300885175} {:x -0.10000002011656761, :y 0.3332245988697985} {:x -0.07000002078711987, :y 0.33912430918602404} {:x -0.04000002145767212, :y 0.34481799744387787} {:x -0.010000022128224373, :y 0.35029187463654377} {:x 0.019999977201223373, :y 0.3555325246152578} {:x 0.04999997653067112, :y 0.36052695865405127} {:x 0.07999997586011887, :y 0.36526266891884684} {:x 0.10999997518956661, :y 0.3697276805339217} {:x 0.13999997451901436, :y 0.3739106019431884} {:x 0.1699999738484621, :y 0.3778006732704418} {:x 0.19999997317790985, :y 0.38138781239163844} {:x 0.2299999725073576, :y 0.38466265844338654} {:x 0.25999997183680534, :y 0.38761661250504864} {:x 0.2899999711662531, :y 0.39024187520712567} {:x 0.31999997049570084, :y 0.3925314810357828} {:x 0.3499999698251486, :y 0.3944793291223855} {:x 0.37999996915459633, :y 0.3960802103275854} {:x 0.4099999684840441, :y 0.3973298304516875} {:x 0.4399999678134918, :y 0.39822482942655874} {:x 0.46999996714293957, :y 0.3987627963690343} {:x 0.4999999664723873, :y 0.3989422804014325} {:x 0.5299999658018351, :y 0.3987627971712081} {:x 0.5599999651312828, :y 0.398224831028742} {:x 0.5899999644607306, :y 0.39732983284956114} {:x 0.6199999637901783, :y 0.39608021351469513} {:x 0.649999963119626, :y 0.39447933309017047} {:x 0.6799999624490738, :y 0.3925314857736144} {:x 0.7099999617785215, :y 0.39024188070235455} {:x 0.7399999611079693, :y 0.3876166187430612} {:x 0.769999960437417, :y 0.38466266540766963} {:x 0.7999999597668648, :y 0.3813878200638521} {:x 0.8299999590963125, :y 0.3778006816304998} {:x 0.8599999584257603, :y 0.3739106109693458} {:x 0.889999957755208, :y 0.369727690202869} {:x 0.9199999570846558, :y 0.3652626792058104} {:x 0.9499999564141035, :y 0.3605269695328986} {:x 0.9799999557435513, :y 0.35553253605860824} {:x 1.009999955072999, :y 0.35029188661588295} {:x 1.0399999544024467, :y 0.344818009929676} {:x 1.0699999537318945, :y 0.3391243221478564} {:x 1.0999999530613422, :y 0.33322461227646877} {:x 1.12999995239079, :y 0.3271329868285161} {:x 1.1599999517202377, :y 0.3208638139953829} {:x 1.1899999510496855, :y 0.31443166764775177} {:x 1.2199999503791332, :y 0.30785127146846214} {:x 1.249999949708581, :y 0.30113744351327587} {:x 1.2799999490380287, :y 0.2943050414870493} {:x 1.3099999483674765, :y 0.28736890901246903} {:x 1.3399999476969242, :y 0.2803438231564091} {:x 1.369999947026372, :y 0.2732444434652477} {:x 1.3999999463558197, :y 0.2660852627452874} {:x 1.4299999456852674, :y 0.25888055980790453} {:x 1.4599999450147152, :y 0.2516443543813834} {:x 1.489999944344163, :y 0.24439036437273162} {:x 1.5199999436736107, :y 0.237131965643302} {:x 1.5499999430030584, :y 0.229882154441941} {:x 1.5799999423325062, :y 0.22265351261882} {:x 1.609999941661954, :y 0.21545817572226286} {:x 1.6399999409914017, :y 0.20830780405993227} {:x 1.6699999403208494, :y 0.2012135567848539} {:x 1.6999999396502972, :y 0.19418606904609795} {:x 1.729999938979745, :y 0.18723543222366787} {:x 1.7599999383091927, :y 0.1803711772474063} {:x 1.7899999376386404, :y 0.17360226098066628} {:x 1.8199999369680882, :y 0.16693705563123046} {:x 1.849999936297536, :y 0.1603833411346176} {:x 1.8799999356269836, :y 0.15394830043859348} {:x 1.9099999349564314, :y 0.1476385176024946} {:x 1.9399999342858791, :y 0.14145997861095996} {:x 1.9699999336153269, :y 0.13541807478890677} {:x 1.9999999329447746, :y 0.12951760869313944})} {:name \"5dc303ab-a71d-4c60-a2de-c3cd540da1b9\", :values ({:x -1, :y 0.039447933090788895} {:x -0.9700000006705523, :y 0.03946551105979378} {:x -0.9400000013411045, :y 0.039482741515271494} {:x -0.9100000020116568, :y 0.03949962399528476} {:x -0.880000002682209, :y 0.03951615804709407} {:x -0.8500000033527613, :y 0.039532343227177816} {:x -0.8200000040233135, :y 0.0395481791012522} {:x -0.7900000046938658, :y 0.03956366524429061} {:x -0.760000005364418, :y 0.03957880124054269} {:x -0.7300000060349703, :y 0.03959358668355283} {:x -0.7000000067055225, :y 0.0396080211761785} {:x -0.6700000073760748, :y 0.03962210433060791} {:x -0.640000008046627, :y 0.039635835768377425} {:x -0.6100000087171793, :y 0.03964921512038854} {:x -0.5800000093877316, :y 0.03966224202692436} {:x -0.5500000100582838, :y 0.03967491613766576} {:x -0.5200000107288361, :y 0.03968723711170707} {:x -0.4900000113993883, :y 0.03969920461757136} {:x -0.46000001206994057, :y 0.0397108183332253} {:x -0.4300000127404928, :y 0.039722077946093615} {:x -0.4000000134110451, :y 0.03973298315307309} {:x -0.37000001408159733, :y 0.03974353366054618} {:x -0.3400000147521496, :y 0.03975372918439417} {:x -0.31000001542270184, :y 0.03976356945000995} {:x -0.2800000160932541, :y 0.03977305419231034} {:x -0.25000001676380634, :y 0.03978218315574796} {:x -0.2200000174343586, :y 0.03979095609432274} {:x -0.19000001810491085, :y 0.039799372771592956} {:x -0.1600000187754631, :y 0.03980743296068584} {:x -0.13000001944601536, :y 0.03981513644430779} {:x -0.10000002011656761, :y 0.03982248301475415} {:x -0.07000002078711987, :y 0.039829472473918465} {:x -0.04000002145767212, :y 0.039836104633301485} {:x -0.010000022128224373, :y 0.03984237931401958} {:x 0.019999977201223373, :y 0.03984829634681279} {:x 0.04999997653067112, :y 0.039853855572052434} {:x 0.07999997586011887, :y 0.039859056839748296} {:x 0.10999997518956661, :y 0.039863900009555364} {:x 0.13999997451901436, :y 0.03986838495078014} {:x 0.1699999738484621, :y 0.03987251154238654} {:x 0.19999997317790985, :y 0.03987627967300128} {:x 0.2299999725073576, :y 0.039879689240918954} {:x 0.25999997183680534, :y 0.03988274015410658} {:x 0.2899999711662531, :y 0.03988543233020772} {:x 0.31999997049570084, :y 0.039887765696546215} {:x 0.3499999698251486, :y 0.039889740190129454} {:x 0.37999996915459633, :y 0.03989135575765118} {:x 0.4099999684840441, :y 0.03989261235549393} {:x 0.4399999678134918, :y 0.03989350994973096} {:x 0.46999996714293957, :y 0.03989404851612778} {:x 0.4999999664723873, :y 0.039894228040143274} {:x 0.5299999658018351, :y 0.03989404851693031} {:x 0.5599999651312828, :y 0.039893509951336} {:x 0.5899999644607306, :y 0.03989261235790144} {:x 0.6199999637901783, :y 0.03989135576086109} {:x 0.649999963119626, :y 0.039889740194141675} {:x 0.6799999624490738, :y 0.03988776570136064} {:x 0.7099999617785215, :y 0.03988543233582422} {:x 0.7399999611079693, :y 0.03988274016052501} {:x 0.769999960437417, :y 0.03987968924813914} {:x 0.7999999597668648, :y 0.039876279681023016} {:x 0.8299999590963125, :y 0.03987251155120961} {:x 0.8599999584257603, :y 0.039868384960404325} {:x 0.889999957755208, :y 0.039863900019980386} {:x 0.9199999570846558, :y 0.03985905685097388} {:x 0.9499999564141035, :y 0.03985385558407827} {:x 0.9799999557435513, :y 0.03984829635963857} {:x 1.009999955072999, :y 0.03984237932764494} {:x 1.0399999544024467, :y 0.03983610464772607} {:x 1.0699999537318945, :y 0.03982947248914188} {:x 1.0999999530613422, :y 0.03982248303077598} {:x 1.12999995239079, :y 0.039815136461127616} {:x 1.1599999517202377, :y 0.03980743297830319} {:x 1.1899999510496855, :y 0.039799372790007365} {:x 1.2199999503791332, :y 0.03979095611353372} {:x 1.249999949708581, :y 0.039782183175754986} {:x 1.2799999490380287, :y 0.03977305421311288} {:x 1.3099999483674765, :y 0.03976356947160743} {:x 1.3399999476969242, :y 0.039753729206786007} {:x 1.369999947026372, :y 0.03974353368373178} {:x 1.3999999463558197, :y 0.039732983177051824} {:x 1.4299999456852674, :y 0.03972207797086484} {:x 1.4599999450147152, :y 0.039710818358788355} {:x 1.489999944344163, :y 0.03969920464392554} {:x 1.5199999436736107, :y 0.03968723713885168} {:x 1.5499999430030584, :y 0.039674916165600066} {:x 1.5799999423325062, :y 0.03966224205564761} {:x 1.609999941661954, :y 0.03964921514989996} {:x 1.6399999409914017, :y 0.03963583579867623} {:x 1.6699999403208494, :y 0.03962210436169328} {:x 1.6999999396502972, :y 0.0396080212080496} {:x 1.729999938979745, :y 0.03959358671620881} {:x 1.7599999383091927, :y 0.03957880127398265} {:x 1.7899999376386404, :y 0.03956366527851368} {:x 1.8199999369680882, :y 0.03954817913625744} {:x 1.849999936297536, :y 0.03953234326296429} {:x 1.8799999356269836, :y 0.039516158083660824} {:x 1.9099999349564314, :y 0.03949962403263082} {:x 1.9399999342858791, :y 0.03948274155339584} {:x 1.9699999336153269, :y 0.0394655110986954} {:x 1.9999999329447746, :y 0.039447933130466746})} {:name \"cf131eaf-b78f-44a8-a8b2-b0921199659f\", :values ({:x -1, :y 0.003988974019193495} {:x -0.9700000006705523, :y 0.003988991790111942} {:x -0.9400000013411045, :y 0.00398900920209873} {:x -0.9100000020116568, :y 0.003989026255149158} {:x -0.880000002682209, :y 0.003989042949258624} {:x -0.8500000033527613, :y 0.003989059284422618} {:x -0.8200000040233135, :y 0.003989075260636732} {:x -0.7900000046938658, :y 0.003989090877896651} {:x -0.760000005364418, :y 0.00398910613619816} {:x -0.7300000060349703, :y 0.003989121035537138} {:x -0.7000000067055225, :y 0.0039891355759095635} {:x -0.6700000073760748, :y 0.003989149757311511} {:x -0.640000008046627, :y 0.00398916357973915} {:x -0.6100000087171793, :y 0.003989177043188751} {:x -0.5800000093877316, :y 0.003989190147656677} {:x -0.5500000100582838, :y 0.003989202893139391} {:x -0.5200000107288361, :y 0.003989215279633452} {:x -0.4900000113993883, :y 0.0039892273071355155} {:x -0.46000001206994057, :y 0.003989238975642333} {:x -0.4300000127404928, :y 0.003989250285150756} {:x -0.4000000134110451, :y 0.00398926123565773} {:x -0.37000001408159733, :y 0.0039892718271602986} {:x -0.3400000147521496, :y 0.003989282059655603} {:x -0.31000001542270184, :y 0.003989291933140879} {:x -0.2800000160932541, :y 0.003989301447613461} {:x -0.25000001676380634, :y 0.003989310603070781} {:x -0.2200000174343586, :y 0.003989319399510367} {:x -0.19000001810491085, :y 0.003989327836929844} {:x -0.1600000187754631, :y 0.003989335915326933} {:x -0.13000001944601536, :y 0.003989343634699454} {:x -0.10000002011656761, :y 0.003989350995045322} {:x -0.07000002078711987, :y 0.00398935799636255} {:x -0.04000002145767212, :y 0.0039893646386492485} {:x -0.010000022128224373, :y 0.003989370921903623} {:x 0.019999977201223373, :y 0.003989376846123977} {:x 0.04999997653067112, :y 0.003989382411308712} {:x 0.07999997586011887, :y 0.0039893876174563235} {:x 0.10999997518956661, :y 0.003989392464565408} {:x 0.13999997451901436, :y 0.003989396952634655} {:x 0.1699999738484621, :y 0.003989401081662855} {:x 0.19999997317790985, :y 0.003989404851648891} {:x 0.2299999725073576, :y 0.003989408262591747} {:x 0.25999997183680534, :y 0.0039894113144905} {:x 0.2899999711662531, :y 0.003989414007344327} {:x 0.31999997049570084, :y 0.0039894163411525} {:x 0.3499999698251486, :y 0.003989418315914391} {:x 0.37999996915459633, :y 0.0039894199316294655} {:x 0.4099999684840441, :y 0.0039894211882972866} {:x 0.4399999678134918, :y 0.0039894220859175164} {:x 0.46999996714293957, :y 0.0039894226244899115} {:x 0.4999999664723873, :y 0.003989422804014327} {:x 0.5299999658018351, :y 0.003989422624490714} {:x 0.5599999651312828, :y 0.003989422085919121} {:x 0.5899999644607306, :y 0.003989421188299694} {:x 0.6199999637901783, :y 0.003989419931632676} {:x 0.649999963119626, :y 0.003989418315918404} {:x 0.6799999624490738, :y 0.003989416341157316} {:x 0.7099999617785215, :y 0.003989414007349945} {:x 0.7399999611079693, :y 0.00398941131449692} {:x 0.769999960437417, :y 0.003989408262598969} {:x 0.7999999597668648, :y 0.003989404851656917} {:x 0.8299999590963125, :y 0.003989401081671683} {:x 0.8599999584257603, :y 0.0039893969526442865} {:x 0.889999957755208, :y 0.003989392464575841} {:x 0.9199999570846558, :y 0.003989387617467559} {:x 0.9499999564141035, :y 0.00398938241132075} {:x 0.9799999557435513, :y 0.003989376846136817} {:x 1.009999955072999, :y 0.0039893709219172655} {:x 1.0399999544024467, :y 0.0039893646386636936} {:x 1.0699999537318945, :y 0.003989357996377798} {:x 1.0999999530613422, :y 0.003989350995061373} {:x 1.12999995239079, :y 0.003989343634716307} {:x 1.1599999517202377, :y 0.003989335915344588} {:x 1.1899999510496855, :y 0.0039893278369483014} {:x 1.2199999503791332, :y 0.003989319399529627} {:x 1.249999949708581, :y 0.003989310603090844} {:x 1.2799999490380287, :y 0.003989301447634326} {:x 1.3099999483674765, :y 0.003989291933162546} {:x 1.3399999476969242, :y 0.003989282059678073} {:x 1.369999947026372, :y 0.003989271827183572} {:x 1.3999999463558197, :y 0.003989261235681806} {:x 1.4299999456852674, :y 0.003989250285175634} {:x 1.4599999450147152, :y 0.003989238975668013} {:x 1.489999944344163, :y 0.003989227307161998} {:x 1.5199999436736107, :y 0.003989215279660737} {:x 1.5499999430030584, :y 0.003989202893167479} {:x 1.5799999423325062, :y 0.003989190147685567} {:x 1.609999941661954, :y 0.003989177043218443} {:x 1.6399999409914017, :y 0.003989163579769644} {:x 1.6699999403208494, :y 0.003989149757342807} {:x 1.6999999396502972, :y 0.003989135575941663} {:x 1.729999938979745, :y 0.003989121035570039} {:x 1.7599999383091927, :y 0.0039891061362318635} {:x 1.7899999376386404, :y 0.003989090877931157} {:x 1.8199999369680882, :y 0.00398907526067204} {:x 1.849999936297536, :y 0.003989059284458729} {:x 1.8799999356269836, :y 0.003989042949295537} {:x 1.9099999349564314, :y 0.003989026255186874} {:x 1.9399999342858791, :y 0.003989009202137248} {:x 1.9699999336153269, :y 0.003988991790151262} {:x 1.9999999329447746, :y 0.003988974019233617})}), :marks ({:type \"line\", :from {:data \"c67bcc9a-f528-48d0-af3f-eefa7ab4bf5b\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"purple\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"be12684c-be0f-4aec-b46c-76fc4f638513\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"green\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"7b469224-159a-4ea3-aad6-de476b931284\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"5dc303ab-a71d-4c60-a2de-c3cd540da1b9\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"red\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}} {:type \"line\", :from {:data \"cf131eaf-b78f-44a8-a8b2-b0921199659f\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"pink\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}})}}"}
;; <=

;; **
;;; Summing up:
;;; ----------
;;; To sum it up, we have the following optimization problem:
;;; 
;;; $$ \underset{m}{\operatorname{argmax}} \mathbb{E}_{x \sim \mathcal{N}(m,\,\sigma^{2}) }[f(x)]	$$
;;; 
;;; Since we fix @@ \sigma @@, we denote the corresponding pdf with @@ p_m (x) @@ and our objective function  with @@ F(m) @@.
;;; 
;;; 
;;; Luckily, @@ F @@  is differentiable w.r.t @@ m @@ and we can use Hill-climbing to find the optimal @@ m @@.
;;; Let us note first, that for the derivative the following holds:
;;; 
;;; 
;;; $$	\frac{d}{dm} F = \frac{d}{dm} \int f(x) p_m (x) dx = \int \frac{d}{dm} f(x)p_m (x) dx = \int f(x) \frac{d}{dm} p_m (x) dx = \int f(x) \left(\frac{d}{dm} \log p_m (x)  \right) p_m (x) dx	$$
;;; 
;;; 
;;; 
;;; 
;;; 
;;; Hence:
;;; 
;;; 
;;; $$	\frac{d}{dm} F = \mathbb{E}_{x \sim p_m (x) }\left[f(x) \frac{d}{dm} \log p_m (x) 	\right]	 $$ 
;; **

;; **
;;; The Derivation of the Logarithm-Term is given by:
;;; $$ 		\frac{d}{dm} \log p_m (x)  = 	\frac{d}{dm} \left( - \frac{(x-m)^2}{2\sigma^2}	\right) = \frac{x-m}{\sigma ^2}	$$
;; **

;; @@
; Partial Derivative of gpdf wrt mu: d/dm log(p_m (x))
(defn dm_loggdpf [m sigma x]
  (/ (- x m) (pow sigma 2)) )
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/dm_loggdpf</span>","value":"#'ppp/dm_loggdpf"}
;; <=

;; **
;;; 3. Application:
;;; ===============
;; **

;; **
;;; 3.1  Defining the target function @@ f: \mathbb{R} \to \mathbb{R} @@ 
;;; ----
;; **

;; @@
;; Defining target function that we want to minimize
;;(defn target [x] (* (* (pow (+ x 2) 2 ) -1)))
(defn target [x ]
  (if (< x 0)
    x
    (* -1 x)
    ;(* -1 x)
    ))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/target</span>","value":"#'ppp/target"}
;; <=

;; @@
 (plot/plot  target r :colour "blue"  :legend "hello")


;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"top":10,"left":55,"bottom":40,"right":10},"data":[{"name":"546f1294-f458-45f2-aa69-41778c049d4c","values":[{"x":-1,"y":-1},{"x":-0.9700000006705523,"y":-0.9700000006705523},{"x":-0.9400000013411045,"y":-0.9400000013411045},{"x":-0.9100000020116568,"y":-0.9100000020116568},{"x":-0.880000002682209,"y":-0.880000002682209},{"x":-0.8500000033527613,"y":-0.8500000033527613},{"x":-0.8200000040233135,"y":-0.8200000040233135},{"x":-0.7900000046938658,"y":-0.7900000046938658},{"x":-0.760000005364418,"y":-0.760000005364418},{"x":-0.7300000060349703,"y":-0.7300000060349703},{"x":-0.7000000067055225,"y":-0.7000000067055225},{"x":-0.6700000073760748,"y":-0.6700000073760748},{"x":-0.640000008046627,"y":-0.640000008046627},{"x":-0.6100000087171793,"y":-0.6100000087171793},{"x":-0.5800000093877316,"y":-0.5800000093877316},{"x":-0.5500000100582838,"y":-0.5500000100582838},{"x":-0.5200000107288361,"y":-0.5200000107288361},{"x":-0.4900000113993883,"y":-0.4900000113993883},{"x":-0.46000001206994057,"y":-0.46000001206994057},{"x":-0.4300000127404928,"y":-0.4300000127404928},{"x":-0.4000000134110451,"y":-0.4000000134110451},{"x":-0.37000001408159733,"y":-0.37000001408159733},{"x":-0.3400000147521496,"y":-0.3400000147521496},{"x":-0.31000001542270184,"y":-0.31000001542270184},{"x":-0.2800000160932541,"y":-0.2800000160932541},{"x":-0.25000001676380634,"y":-0.25000001676380634},{"x":-0.2200000174343586,"y":-0.2200000174343586},{"x":-0.19000001810491085,"y":-0.19000001810491085},{"x":-0.1600000187754631,"y":-0.1600000187754631},{"x":-0.13000001944601536,"y":-0.13000001944601536},{"x":-0.10000002011656761,"y":-0.10000002011656761},{"x":-0.07000002078711987,"y":-0.07000002078711987},{"x":-0.04000002145767212,"y":-0.04000002145767212},{"x":-0.010000022128224373,"y":-0.010000022128224373},{"x":0.019999977201223373,"y":-0.019999977201223373},{"x":0.04999997653067112,"y":-0.04999997653067112},{"x":0.07999997586011887,"y":-0.07999997586011887},{"x":0.10999997518956661,"y":-0.10999997518956661},{"x":0.13999997451901436,"y":-0.13999997451901436},{"x":0.1699999738484621,"y":-0.1699999738484621},{"x":0.19999997317790985,"y":-0.19999997317790985},{"x":0.2299999725073576,"y":-0.2299999725073576},{"x":0.25999997183680534,"y":-0.25999997183680534},{"x":0.2899999711662531,"y":-0.2899999711662531},{"x":0.31999997049570084,"y":-0.31999997049570084},{"x":0.3499999698251486,"y":-0.3499999698251486},{"x":0.37999996915459633,"y":-0.37999996915459633},{"x":0.4099999684840441,"y":-0.4099999684840441},{"x":0.4399999678134918,"y":-0.4399999678134918},{"x":0.46999996714293957,"y":-0.46999996714293957},{"x":0.4999999664723873,"y":-0.4999999664723873},{"x":0.5299999658018351,"y":-0.5299999658018351},{"x":0.5599999651312828,"y":-0.5599999651312828},{"x":0.5899999644607306,"y":-0.5899999644607306},{"x":0.6199999637901783,"y":-0.6199999637901783},{"x":0.649999963119626,"y":-0.649999963119626},{"x":0.6799999624490738,"y":-0.6799999624490738},{"x":0.7099999617785215,"y":-0.7099999617785215},{"x":0.7399999611079693,"y":-0.7399999611079693},{"x":0.769999960437417,"y":-0.769999960437417},{"x":0.7999999597668648,"y":-0.7999999597668648},{"x":0.8299999590963125,"y":-0.8299999590963125},{"x":0.8599999584257603,"y":-0.8599999584257603},{"x":0.889999957755208,"y":-0.889999957755208},{"x":0.9199999570846558,"y":-0.9199999570846558},{"x":0.9499999564141035,"y":-0.9499999564141035},{"x":0.9799999557435513,"y":-0.9799999557435513},{"x":1.009999955072999,"y":-1.009999955072999},{"x":1.0399999544024467,"y":-1.0399999544024467},{"x":1.0699999537318945,"y":-1.0699999537318945},{"x":1.0999999530613422,"y":-1.0999999530613422},{"x":1.12999995239079,"y":-1.12999995239079},{"x":1.1599999517202377,"y":-1.1599999517202377},{"x":1.1899999510496855,"y":-1.1899999510496855},{"x":1.2199999503791332,"y":-1.2199999503791332},{"x":1.249999949708581,"y":-1.249999949708581},{"x":1.2799999490380287,"y":-1.2799999490380287},{"x":1.3099999483674765,"y":-1.3099999483674765},{"x":1.3399999476969242,"y":-1.3399999476969242},{"x":1.369999947026372,"y":-1.369999947026372},{"x":1.3999999463558197,"y":-1.3999999463558197},{"x":1.4299999456852674,"y":-1.4299999456852674},{"x":1.4599999450147152,"y":-1.4599999450147152},{"x":1.489999944344163,"y":-1.489999944344163},{"x":1.5199999436736107,"y":-1.5199999436736107},{"x":1.5499999430030584,"y":-1.5499999430030584},{"x":1.5799999423325062,"y":-1.5799999423325062},{"x":1.609999941661954,"y":-1.609999941661954},{"x":1.6399999409914017,"y":-1.6399999409914017},{"x":1.6699999403208494,"y":-1.6699999403208494},{"x":1.6999999396502972,"y":-1.6999999396502972},{"x":1.729999938979745,"y":-1.729999938979745},{"x":1.7599999383091927,"y":-1.7599999383091927},{"x":1.7899999376386404,"y":-1.7899999376386404},{"x":1.8199999369680882,"y":-1.8199999369680882},{"x":1.849999936297536,"y":-1.849999936297536},{"x":1.8799999356269836,"y":-1.8799999356269836},{"x":1.9099999349564314,"y":-1.9099999349564314},{"x":1.9399999342858791,"y":-1.9399999342858791},{"x":1.9699999336153269,"y":-1.9699999336153269},{"x":1.9999999329447746,"y":-1.9999999329447746}]}],"marks":[{"type":"line","from":{"data":"546f1294-f458-45f2-aa69-41778c049d4c"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"blue"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"546f1294-f458-45f2-aa69-41778c049d4c","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"546f1294-f458-45f2-aa69-41778c049d4c","field":"data.y"}}],"axes":[{"type":"x","scale":"x"},{"type":"y","scale":"y"}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:top 10, :left 55, :bottom 40, :right 10}, :data [{:name \"546f1294-f458-45f2-aa69-41778c049d4c\", :values ({:x -1, :y -1} {:x -0.9700000006705523, :y -0.9700000006705523} {:x -0.9400000013411045, :y -0.9400000013411045} {:x -0.9100000020116568, :y -0.9100000020116568} {:x -0.880000002682209, :y -0.880000002682209} {:x -0.8500000033527613, :y -0.8500000033527613} {:x -0.8200000040233135, :y -0.8200000040233135} {:x -0.7900000046938658, :y -0.7900000046938658} {:x -0.760000005364418, :y -0.760000005364418} {:x -0.7300000060349703, :y -0.7300000060349703} {:x -0.7000000067055225, :y -0.7000000067055225} {:x -0.6700000073760748, :y -0.6700000073760748} {:x -0.640000008046627, :y -0.640000008046627} {:x -0.6100000087171793, :y -0.6100000087171793} {:x -0.5800000093877316, :y -0.5800000093877316} {:x -0.5500000100582838, :y -0.5500000100582838} {:x -0.5200000107288361, :y -0.5200000107288361} {:x -0.4900000113993883, :y -0.4900000113993883} {:x -0.46000001206994057, :y -0.46000001206994057} {:x -0.4300000127404928, :y -0.4300000127404928} {:x -0.4000000134110451, :y -0.4000000134110451} {:x -0.37000001408159733, :y -0.37000001408159733} {:x -0.3400000147521496, :y -0.3400000147521496} {:x -0.31000001542270184, :y -0.31000001542270184} {:x -0.2800000160932541, :y -0.2800000160932541} {:x -0.25000001676380634, :y -0.25000001676380634} {:x -0.2200000174343586, :y -0.2200000174343586} {:x -0.19000001810491085, :y -0.19000001810491085} {:x -0.1600000187754631, :y -0.1600000187754631} {:x -0.13000001944601536, :y -0.13000001944601536} {:x -0.10000002011656761, :y -0.10000002011656761} {:x -0.07000002078711987, :y -0.07000002078711987} {:x -0.04000002145767212, :y -0.04000002145767212} {:x -0.010000022128224373, :y -0.010000022128224373} {:x 0.019999977201223373, :y -0.019999977201223373} {:x 0.04999997653067112, :y -0.04999997653067112} {:x 0.07999997586011887, :y -0.07999997586011887} {:x 0.10999997518956661, :y -0.10999997518956661} {:x 0.13999997451901436, :y -0.13999997451901436} {:x 0.1699999738484621, :y -0.1699999738484621} {:x 0.19999997317790985, :y -0.19999997317790985} {:x 0.2299999725073576, :y -0.2299999725073576} {:x 0.25999997183680534, :y -0.25999997183680534} {:x 0.2899999711662531, :y -0.2899999711662531} {:x 0.31999997049570084, :y -0.31999997049570084} {:x 0.3499999698251486, :y -0.3499999698251486} {:x 0.37999996915459633, :y -0.37999996915459633} {:x 0.4099999684840441, :y -0.4099999684840441} {:x 0.4399999678134918, :y -0.4399999678134918} {:x 0.46999996714293957, :y -0.46999996714293957} {:x 0.4999999664723873, :y -0.4999999664723873} {:x 0.5299999658018351, :y -0.5299999658018351} {:x 0.5599999651312828, :y -0.5599999651312828} {:x 0.5899999644607306, :y -0.5899999644607306} {:x 0.6199999637901783, :y -0.6199999637901783} {:x 0.649999963119626, :y -0.649999963119626} {:x 0.6799999624490738, :y -0.6799999624490738} {:x 0.7099999617785215, :y -0.7099999617785215} {:x 0.7399999611079693, :y -0.7399999611079693} {:x 0.769999960437417, :y -0.769999960437417} {:x 0.7999999597668648, :y -0.7999999597668648} {:x 0.8299999590963125, :y -0.8299999590963125} {:x 0.8599999584257603, :y -0.8599999584257603} {:x 0.889999957755208, :y -0.889999957755208} {:x 0.9199999570846558, :y -0.9199999570846558} {:x 0.9499999564141035, :y -0.9499999564141035} {:x 0.9799999557435513, :y -0.9799999557435513} {:x 1.009999955072999, :y -1.009999955072999} {:x 1.0399999544024467, :y -1.0399999544024467} {:x 1.0699999537318945, :y -1.0699999537318945} {:x 1.0999999530613422, :y -1.0999999530613422} {:x 1.12999995239079, :y -1.12999995239079} {:x 1.1599999517202377, :y -1.1599999517202377} {:x 1.1899999510496855, :y -1.1899999510496855} {:x 1.2199999503791332, :y -1.2199999503791332} {:x 1.249999949708581, :y -1.249999949708581} {:x 1.2799999490380287, :y -1.2799999490380287} {:x 1.3099999483674765, :y -1.3099999483674765} {:x 1.3399999476969242, :y -1.3399999476969242} {:x 1.369999947026372, :y -1.369999947026372} {:x 1.3999999463558197, :y -1.3999999463558197} {:x 1.4299999456852674, :y -1.4299999456852674} {:x 1.4599999450147152, :y -1.4599999450147152} {:x 1.489999944344163, :y -1.489999944344163} {:x 1.5199999436736107, :y -1.5199999436736107} {:x 1.5499999430030584, :y -1.5499999430030584} {:x 1.5799999423325062, :y -1.5799999423325062} {:x 1.609999941661954, :y -1.609999941661954} {:x 1.6399999409914017, :y -1.6399999409914017} {:x 1.6699999403208494, :y -1.6699999403208494} {:x 1.6999999396502972, :y -1.6999999396502972} {:x 1.729999938979745, :y -1.729999938979745} {:x 1.7599999383091927, :y -1.7599999383091927} {:x 1.7899999376386404, :y -1.7899999376386404} {:x 1.8199999369680882, :y -1.8199999369680882} {:x 1.849999936297536, :y -1.849999936297536} {:x 1.8799999356269836, :y -1.8799999356269836} {:x 1.9099999349564314, :y -1.9099999349564314} {:x 1.9399999342858791, :y -1.9399999342858791} {:x 1.9699999336153269, :y -1.9699999336153269} {:x 1.9999999329447746, :y -1.9999999329447746})}], :marks [{:type \"line\", :from {:data \"546f1294-f458-45f2-aa69-41778c049d4c\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"blue\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"546f1294-f458-45f2-aa69-41778c049d4c\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"546f1294-f458-45f2-aa69-41778c049d4c\", :field \"data.y\"}}], :axes [{:type \"x\", :scale \"x\"} {:type \"y\", :scale \"y\"}]}}"}
;; <=

;; **
;;; 3.2  Defining our probabilistic model:
;;; ----
;;; 
;;; 
;;; For hill-climbing, we will use the derivative:
;;; 
;;; $$	 \frac{d}{dm} F  = \mathbb{E}_{x \sim p_m (x) }\left[f(x) \frac{d}{dm} \log p_m (x) 	\right]	 $$ 
;;; 
;;; Since the calculation of the integral is intractable, we approximate the right-hand-side by sampling @@ x \sim \mathcal{N}(m, \sigma ^2)@@ and plugging our samples into the function @@f(x) \frac{d}{dm} \log p_m (x)  @@.
;;; 
;;; 
;; **

;; @@
; Query to sample f(x)d/dm log pm(x) with x~pm(x), pm normal(m,sigma)
(with-primitive-procedures [dm_loggdpf
                            target]
  (defquery obj-func [m sigma]
    (let [x (sample (normal m sigma))]
      (* (target x) (dm_loggdpf m sigma x)))) )


;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/obj-func</span>","value":"#'ppp/obj-func"}
;; <=

;; **
;;; 3.3  Defining a sampling function: TODO: instead LMH -> importance sampling OR include observe
;;; ---
;;; We use the Lightweight-Metropolis-Hastings Algorithm to do inference.
;;; 
;;; 
;; **

;; @@
; FUNCTION that executes the query and returns the expectation of the sampling approximation
; Input: m .. mean, sigma .. standard deviation, n .. size of samples
(defn sampling [m sigma n]
  (let [lazy-samples (doquery :lmh obj-func [m sigma])
        samples (map :result (take n  (take 10000 (drop 1000 lazy-samples))))]
    (/ (reduce + samples) n)))



;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/sampling</span>","value":"#'ppp/sampling"}
;; <=

;; **
;;; 3. 4  Applying a gradient method: 
;;; ---
;;; 
;;; ** 3.4.1 Hill-Climbing**
;;; 
;;; Initialize: @@ \sigma @@, @@ m_0 @@ @@ \alpha @@
;; **

;; @@

;; Initial Values
(def sigma 0.1)
(def m0 -8)
(def alpha 0.3)

(def number-of-iterations 100)

;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/number-of-iterations</span>","value":"#'ppp/number-of-iterations"}
;; <=

;; **
;;; Repeat:
;;; 
;;; $$ m_1 \leftarrow m_0 + \alpha \left( \frac{d}{dm} F \right) (m_0) $$
;;; $$ m_2 \leftarrow m_1 + \alpha \left( \frac{d}{dm} F \right) (m_1) $$
;;; $$	\vdots	$$
;;; 
;; **

;; @@
;; FUNCTION: Hillclimbing
;; Input: m0 .. initial value, number-of-iterations .. number of iterations
(defn hill-climbing
  [m0 number-of-iterations]
  (loop [m m0 k number-of-iterations]
    (if (= k 0)
      m
      (recur (+ m (* alpha (sampling m sigma 100))) (- k 1))))) ;; sampling size: 100

;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/hill-climbing</span>","value":"#'ppp/hill-climbing"}
;; <=

;; **
;;;  Execution of hill-climbing:
;; **

;; @@
;; Just for comparison, we execute hill-climbing several times.
(take 5 (repeatedly #(hill-climbing m0 number-of-iterations)))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-8.883025444441917E-4</span>","value":"-8.883025444441917E-4"},{"type":"html","content":"<span class='clj-double'>-0.08106539740335235</span>","value":"-0.08106539740335235"},{"type":"html","content":"<span class='clj-double'>0.028121825535982692</span>","value":"0.028121825535982692"},{"type":"html","content":"<span class='clj-double'>-0.05782695824536817</span>","value":"-0.05782695824536817"},{"type":"html","content":"<span class='clj-double'>-0.16181132974489565</span>","value":"-0.16181132974489565"}],"value":"(-8.883025444441917E-4 -0.08106539740335235 0.028121825535982692 -0.05782695824536817 -0.16181132974489565)"}
;; <=

;; **
;;; ** 3.4.2 Adam **
;; **

;; @@
;; Adam (Adaptive Moment Estimation): gradient descent optimization algorithm

(def beta_1 0.9)
(def beta_2 0.999)
(def epsilon (pow 10 -8))
(def eta 0.1)
(def number-of-iterations 500)

(defn mt_hat [mt t grad_m] (/ (+ (* beta_1 mt) (* (- 1 beta_1) grad_m)) (- 1 (pow beta_1 t))))
  
(defn vt_hat [vt t grad_m] (/ (+ (* beta_2 vt) (* (- 1 beta_2) (pow grad_m 2))) (- 1 (pow beta_2 t))))

; would it be better to write up all in one, to avoid recomputation of d/dm(F)?
; or will the LMH algorithm take care of recomputation?

(defn adam
  [m0 number-of-iterations mt vt eta]
  (loop [m m0 k number-of-iterations]
    (if (= k 0)
      m
      (recur 
        (let [m_est (sampling m sigma 100)]
          (+ m (* eta (/ (mt_hat mt k m_est) (pow (+ (vt_hat vt k m_est) epsilon) 0.5)))))
        (- k 1))))) ;; sampling size: 100
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/adam</span>","value":"#'ppp/adam"}
;; <=

;; @@
(take 5 (repeatedly #(adam m0 number-of-iterations 0 0 eta)))
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-lazy-seq'>(</span>","close":"<span class='clj-lazy-seq'>)</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-double'>-0.04815517315156538</span>","value":"-0.04815517315156538"},{"type":"html","content":"<span class='clj-double'>0.09958950146675385</span>","value":"0.09958950146675385"},{"type":"html","content":"<span class='clj-double'>0.04160787795805753</span>","value":"0.04160787795805753"},{"type":"html","content":"<span class='clj-double'>-0.07846702479341591</span>","value":"-0.07846702479341591"},{"type":"html","content":"<span class='clj-double'>-2.8919659486173095</span>","value":"-2.8919659486173095"}],"value":"(-0.04815517315156538 0.09958950146675385 0.04160787795805753 -0.07846702479341591 -2.8919659486173095)"}
;; <=

;; **
;;; Extension 1: Including @@ \sigma @@ as second parameter.
;;; ----
;;; Including a second parameter in our optimization problem will not change much, except that we will use the gradient of @@ F @@. 
;; **

;; @@

;; @@

;; **
;;; THE END
;;; ======
;;; Extensions of our approach:
;;; ----------
;;; * In Hill-Climbing: 
;;; 
;;; Check, if the updating procedure of @@ m @@ is correct, i.e. is @@ F ( m_0)  \leq F ( m_1) \leq F ( m_2) \leq ... @@ ensured?
;;; 
;;; * Distribution:
;;; 
;;; Including @@ \sigma @@ as second parameter.
;;; 
;;; * Target function:
;;; 
;;; Multi-dimensional case.
;;; 
;; **

;; @@

;; @@

;; **
;;; TO BE DELETED: Extension 1: m update correct ? - In work mode
;;; ---
;; **

;; @@
;; Extension/ Improvement in Hill-climbing:
;; In order to show that the inequality chain from above holds, we approximate again the mean by using simple Monte-Carlo methods.

;; Probabilistic Model
(with-primitive-procedures [target]
(defquery obj-func2 [m sigma]
    (let [x (sample (normal m sigma))]
      (target x)) ))

;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/obj-func2</span>","value":"#'ppp/obj-func2"}
;; <=

;; @@
; FUNCTION that executes the query and returns the expectation of the sampling approximation of obj-func2
; Input: m .. mean, sigma .. standard deviation, n .. size of samples
(defn sampling2 [m sigma n]
  (let [lazy-samples (doquery :lmh obj-func [m sigma])
        samples (map :result (take n  (take 10000 (drop 1000 lazy-samples))))]
    (/ (reduce + samples) n)))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/sampling2</span>","value":"#'ppp/sampling2"}
;; <=

;; @@
;; Function comparing m_old, m_new
;; returning truth-value of F_old < F_new
(defn keep_updating [m_old m_new]
  (let [number-of-samples 100
        old-F (sampling2 m_old sigma number-of-samples)
        new-F (sampling2 m_new sigma number-of-samples)]
    (<= old-F (+ new-F 10)))
  )
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/keep_updating</span>","value":"#'ppp/keep_updating"}
;; <=

;; @@
;; Extension of hill-climbing w/ update-check is okay
;; FUNCTION: Hillclimbing
;; Input: m0 .. initial value, number-of-iterations .. number of iterations
(defn hill-climbing2
  [m0 number-of-iterations]
  (loop [m m0 k number-of-iterations update_bool true m-old m0]
    (if (or (= k 0) (not update_bool))
      (when (> k 0)
        (println "premature stop")
        (println (sampling m sigma 100) )
        m)
    	
      (recur (+ m (* alpha (sampling m sigma 100))) (- k 1)	(keep_updating  m-old (+ m (* alpha (sampling m sigma 100)))) m )))) ;; sampling size: 100

;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;ppp/hill-climbing2</span>","value":"#'ppp/hill-climbing2"}
;; <=

;; @@
;; Just for comparison, we execute hill-climbing several times.
(take 5 (repeatedly #(hill-climbing2 m0 number-of-iterations)))
(hill-climbing2 m0 number-of-iterations)
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; 
;; **

;; @@

;; @@

;; @@

;; @@
